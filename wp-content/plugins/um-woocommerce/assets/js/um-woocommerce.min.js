function um_wc_display_order(e,t){return void 0===t&&void 0!==e.currentTarget&&(e.preventDefault(e),t=jQuery(e.currentTarget).parents("tr").data("order_id"),window.history.pushState("string","Orders",jQuery(e.currentTarget).attr("href"))),wp.ajax.send("um_woocommerce_get_order",{data:{order_id:t,nonce:um_scripts.nonce},beforeSend:prepare_Modal,success:function(e){e?(show_Modal(e),responsive_Modal(),jQuery(".um-popup:visible").addClass("um-popup-order").show()):remove_Modal()},error:function(e){remove_Modal(),console.log("===UM Woocommerce error===",e)}})}function um_wc_display_subscription(e,t){return void 0===t&&void 0!==e.currentTarget&&(e.preventDefault(e),t=jQuery(e.currentTarget).attr("href").split("subscription/#").pop(),window.history.pushState("string","Subscriptions",jQuery(e.currentTarget).attr("href"))),wp.ajax.send("um_woocommerce_get_subscription",{data:{subscription_id:t,nonce:um_scripts.nonce},beforeSend:function(){jQuery(".woocommerce_account_subscriptions").css({cursor:"wait",opacity:"0.7"})},success:function(e){"string"==typeof e.content&&(jQuery(".woocommerce_account_subscriptions").hide().after(e.content),jQuery(".um_account_subscription").fadeIn()),"object"==typeof e.script_params&&(WCSViewSubscription=e.script_params),"string"==typeof e.script_ready&&jQuery.globalEval(e.script_ready)},error:function(e){console.log("===UM Woocommerce error===",e)}})}function um_wc_refresh_address(e,r,t){var o,n=0;if(jQuery(t).closest(".um-field[id]").length){var u=jQuery(t).closest(".um-field[id]").attr("id").match(/um_field_(\d+)_(billing|shipping)_country/i);"object"==typeof u&&3===u.length&&(n=parseInt(u[1]))}if(!n&&jQuery(t).closest("form").length)n=parseInt(jQuery(t).closest("form").find('input[name="form_id"]').val());wp.ajax.send("um_woocommerce_refresh_address",{data:{nonce:um_scripts.nonce,country:e,type:r,form_id:n},success:function(e){var t=".um-field-billing_state";"shipping_country"===r&&(t=".um-field-shipping_state"),0<jQuery(t+" .um-field-error").length&&(o=jQuery(t+" .um-field-error").clone()),jQuery(t).html(e).contents().unwrap(),0<jQuery(t+" select").length?jQuery(t+" select").select2({width:"100%"}):0<jQuery(t+' input[type = "hidden"]').length?jQuery(t).hide():jQuery(t).show(),o&&jQuery(t).append(o)},error:function(e){console.log("===UM Woocommerce error===",e)}})}jQuery(document).ready(function(e){jQuery(".um-woo-review-avg").length&&jQuery(".um-woo-review-avg").um_raty({half:!0,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},hints:["1 Star","2 Star","3 Star","4 Star","5 Star"],space:!1,readOnly:!0});var t=jQuery(".um-field #billing_country"),r=jQuery(".um-field #shipping_country");t.length&&um_wc_refresh_address(t.val(),t.data("key"),t);r.length&&um_wc_refresh_address(r.val(),r.data("key"),r);if(jQuery(document.body).on("change",".um-field #billing_country, .um-field #shipping_country",function(){um_wc_refresh_address(jQuery(this).val(),jQuery(this).data("key"),jQuery(this))}),jQuery(".um-account-tab select.country_select, .um-account-tab select.state_select, .um-custom-shortcode-tab select").length&&jQuery(".um-account-tab select.country_select, .um-account-tab select.state_select, .um-custom-shortcode-tab select").select2({width:"100%"}),0<jQuery(".um-account-tab .um-field-state .um-field-error").length){var o=jQuery(".um-account-tab .um-field-country:visible select");um_wc_refresh_address(o.val(),o.data("key"),o)}(jQuery(document.body).on("click",".um-woo-orders .um-woo-view-order, .um-woo-orders a.button.view",um_wc_display_order),jQuery(document.body).on("click",".um-woo-order-hide",function(e){return e.preventDefault(),window.history.pushState("string","Orders",window.location.pathname),remove_Modal(),!1}),-1<window.location.href.indexOf("orders/#"))&&um_wc_display_order(e,window.location.href.split("orders/#").pop());(jQuery(document.body).on("click",".um-woo-subscriptions a.button.view, .um-woo-subscriptions .subscription-id > a",um_wc_display_subscription),jQuery(document.body).on("click",".back_to_subscriptions",function(e){return e.preventDefault(),window.history.pushState("string","Subscriptions",window.location.pathname),jQuery(".woocommerce_account_subscriptions").removeAttr("style").fadeIn().nextAll(".um_account_subscription").remove(),!1}),-1<window.location.href.indexOf("subscription/#"))&&um_wc_display_subscription(e,window.location.href.split("subscription/#").pop());jQuery(document.body).on("click",'a[href*="add-payment-method"]',function(e){if(e.preventDefault(),!/add-payment-method=1/.test(location.href)){var t=location.href+(/\?/.test(location.href)?"&":"?")+"add-payment-method=1";window.history.pushState("string","Add payment method",t)}jQuery("#um_add_payment_method_content .um-modal-overlay").remove(),jQuery("#um_add_payment_method_content .um-modal").removeClass("um-modal-hidden").show().after('<div class="um-modal-overlay"></div>'),jQuery(document.body).trigger("resize")}),jQuery("#um_add_payment_method_content").on("click",".um-modal-overlay",function(e){e.stopPropagation(),window.history.pushState("string","Orders",window.location.pathname);var t=jQuery(e.currentTarget);t.siblings(".um-modal").addClass("um-modal-hidden").hide(),t.remove()}),/add-payment-method=1/.test(location.href)&&jQuery('a[href*="add-payment-method"]').length&&jQuery('a[href*="add-payment-method"]').trigger("click")});